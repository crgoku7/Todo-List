<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TODO-LIST</title>
    <link rel = "stylesheet" href = "css/styles.css">
</head>
<body>
    <h1 class = 'heading'></h1>
    
    
    <form action = '/<%=path%>/delete' method = 'post' class = 'delete-form'>
        <div class = 'itemList'>

        </div>
    </form>
    <form action = "/<%=path%>" method = 'post'>
        <input type ='text' name = 'newtask' placeholder="Enter new task">
        <button type = "submit">Add task</button>
        
    </form>

    <script>
        var path = <%- JSON.stringify(path) %> ; 
        if(path === ''){
            document.querySelector('.heading').textContent = 'Today';
            document.querySelector('.delete-form').action = '/delete';
        }
        else{
            document.querySelector('.heading').textContent = path;
        }
    
        const taskList = <%- JSON.stringify(taskList) %>;
        taskList.forEach(element => {
            if(element.length>0){
            document.querySelector(".itemList").innerHTML += `<div class = 'item'><input type = checkbox onChange = 'this.form.submit()' name = '${element}'>${element}</div>`;
            }
        });
    </script>
</body>
</html>